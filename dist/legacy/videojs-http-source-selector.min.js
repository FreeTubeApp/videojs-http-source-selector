!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["videojs-http-source-selector"]=t(e.videojs)}(this,function(u){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),r(e.prototype.constructor=e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t){var n=this;this.ready(function(){var r,e=(null==u||null==(e=u.obj)?void 0:e.merge)||u.mergeOptions;r=n,e(a,t),r.addClass("vjs-http-source-selector"),"Html5"!==r.techName_?console.error(r.techName_):r.on(["loadedmetadata"],function(e){var t,n;r.videojsHTTPSouceSelectorInitialized||(r.videojsHTTPSouceSelectorInitialized=!0,(n=(t=r.controlBar).getChild("fullscreenToggle"))?t.el().insertBefore(t.addChild("SourceMenuButton").el(),n.el()):t.el().append(t.addChild("SourceMenuButton").el()))})}),u.registerComponent("SourceMenuButton",i),u.registerComponent("SourceMenuItem",d)}var t=u.getComponent("MenuItem"),l=u.getComponent("Component"),d=function(l){function e(e,t){return t.selectable=!0,t.multiSelectable=!1,l.call(this,e,t)||this}n(e,l);var t=e.prototype;return t.handleClick=function(){for(var e=this.options_,t=(l.prototype.handleClick.call(this),[].concat(this.player().qualityLevels())),n=c(t.entries());!(r=n()).done;){var r=r.value,o=r[0];r[1].enabled=e.index===t.length||e.index===o}},t.update=function(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index===e)},e}(t),p=(l.registerComponent("SourceMenuItem",d),u.getComponent("MenuButton")),i=function(a){function e(e,t){var e=a.call(this,e,t)||this,n=(Reflect.apply(p,s(e),arguments),e.player().qualityLevels());if(t&&t.default)if("low"===t.default)for(var r=c(n.entries());!(o=r()).done;){var o=o.value,l=o[0];o[1].enabled=0===l}else if("high"===t.default)for(var i=0;i<n.length;i++)n[i].enabled=i===n.length-1;return e.player().qualityLevels().on(["change","addqualitylevel"],u.bind(s(e),e.update)),e}n(e,a);var t=e.prototype;return t.createEl=function(){return u.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},t.buildCSSClass=function(){return p.prototype.buildCSSClass.call(this)},t.update=function(){return p.prototype.update.call(this)},t.createItems=function(){for(var e=[],t=this.player().qualityLevels(),n=[],r=t.length-1;0<=r;r--){var o=r===t.selectedIndex,l=""+r,i=r,a=t[r];a.height?(l=a.height+"p",i=Number.parseInt(a.height,10)):a.bitrate&&(l=Math.floor(a.bitrate/1e3)+" kbps",i=Number.parseInt(a.bitrate,10)),n.includes(l)||(n.push(l),e.push(new d(this.player_,{label:l,index:r,selected:o,sortValue:i})))}return 1<t.length&&e.push(new d(this.player_,{label:"Auto",index:t.length,selected:!1,sortValue:99999})),e.sort(function(e,t){return t.options_.sortValue-e.options_.sortValue}),e},e}(p),a={},t=u.registerPlugin;return t("httpSourceSelector",e),e.VERSION="1.1.7",e});