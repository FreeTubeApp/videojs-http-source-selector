//! videojs-http-source-selector v1.1.7 ~~ https://github.com/FreeTubeApp/videojs-http-source-selector ~~ MIT License
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["videojs-http-source-selector"]=t(e.videojs)}(this,function(s){"use strict";var e=s.getComponent("MenuItem"),t=s.getComponent("Component");class a extends e{constructor(e,t){t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleClick(){var e,t,o=this.options_,l=(super.handleClick(),[...this.player().qualityLevels()]);for([e,t]of l.entries())t.enabled=o.index===l.length||o.index===e}update(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index===e)}}t.registerComponent("SourceMenuItem",a);const r=s.getComponent("MenuButton");class o extends r{constructor(e,t){super(e,t),Reflect.apply(r,this,arguments);var o=this.player().qualityLevels();if(t&&t.default)if("low"===t.default)for(var[l,n]of o.entries())n.enabled=0===l;else if("high"===t.default)for(let e=0;e<o.length;e++)o[e].enabled=e===o.length-1;this.player().qualityLevels().on(["change","addqualitylevel"],s.bind(this,this.update))}createEl(){return s.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}buildCSSClass(){return r.prototype.buildCSSClass.call(this)}update(){return r.prototype.update.call(this)}createItems(){var l=[],n=this.player().qualityLevels(),s=[];for(let o=n.length-1;0<=o;o--){var r=o===n.selectedIndex;let e=""+o,t=o;var i=n[o];i.height?(e=i.height+"p",t=Number.parseInt(i.height,10)):i.bitrate&&(e=Math.floor(i.bitrate/1e3)+" kbps",t=Number.parseInt(i.bitrate,10)),s.includes(e)||(s.push(e),l.push(new a(this.player_,{label:e,index:o,selected:r,sortValue:t})))}return 1<n.length&&l.push(new a(this.player_,{label:"Auto",index:n.length,selected:!1,sortValue:99999})),l.sort(function(e,t){return t.options_.sortValue-e.options_.sortValue}),l}}const n={};e=s.registerPlugin;function l(t){this.ready(()=>{var l,e=s?.obj?.merge||s.mergeOptions;l=this,e(n,t),l.addClass("vjs-http-source-selector"),"Html5"!==l.techName_?console.error(l.techName_):l.on(["loadedmetadata"],function(e){var t,o;l.videojsHTTPSouceSelectorInitialized||(l.videojsHTTPSouceSelectorInitialized=!0,(o=(t=l.controlBar).getChild("fullscreenToggle"))?t.el().insertBefore(t.addChild("SourceMenuButton").el(),o.el()):t.el().append(t.addChild("SourceMenuButton").el()))})}),s.registerComponent("SourceMenuButton",o),s.registerComponent("SourceMenuItem",a)}return e("httpSourceSelector",l),l.VERSION="1.1.7",l});
