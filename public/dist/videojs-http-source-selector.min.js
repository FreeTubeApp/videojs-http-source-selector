//! videojs-http-source-selector v1.1.7 ~~ https://github.com/FreeTubeApp/videojs-http-source-selector ~~ MIT License
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["videojs-http-source-selector"]=t(e.videojs)}(this,function(n){"use strict";var e=n.getComponent("MenuItem"),t=n.getComponent("Component");class a extends e{constructor(e,t){t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleClick(){const l=this.options_,o=(super.handleClick(),Array.from(this.player().qualityLevels()));o.forEach((e,t)=>{e.enabled=l.index===o.length||l.index===t})}update(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index===e)}}t.registerComponent("SourceMenuItem",a);const o=n.getComponent("MenuButton");class l extends o{constructor(e,t){super(e,t),Reflect.apply(o,this,arguments);var l=this.player().qualityLevels();if(t&&t.default)if("low"===t.default)for(let e=0;i<l.length;e++)l[e].enabled=0===e;else if("high"===t.default)for(let e=0;e<l.length;e++)l[e].enabled=e===l.length-1;this.player().qualityLevels().on(["change","addqualitylevel"],n.bind(this,this.update))}createEl(){return n.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}buildCSSClass(){return o.prototype.buildCSSClass.call(this)}update(){return o.prototype.update.call(this)}createItems(){var o=[],n=this.player().qualityLevels(),s=[];for(let l=n.length-1;0<=l;l--){var r=l===n.selectedIndex;let e=""+l,t=l;var i=n[l];i.height?(e=i.height+"p",t=Number.parseInt(i.height,10)):i.bitrate&&(e=Math.floor(i.bitrate/1e3)+" kbps",t=Number.parseInt(i.bitrate,10)),s.includes(e)||(s.push(e),o.push(new a(this.player_,{label:e,index:l,selected:r,sortValue:t})))}return 1<n.length&&o.push(new a(this.player_,{label:"Auto",index:n.length,selected:!1,sortValue:99999})),o.sort(function(e,t){return t.options_.sortValue-e.options_.sortValue}),o}}const s={};e=n.registerPlugin;function r(t){this.ready(()=>{var e=n?.obj?.merge||n.mergeOptions,o=this;e(s,t),o.addClass("vjs-http-source-selector"),"Html5"===o.techName_&&o.on(["loadedmetadata"],function(e){var t,l;o.videojsHTTPSouceSelectorInitialized||(o.videojsHTTPSouceSelectorInitialized=!0,(l=(t=o.controlBar).getChild("fullscreenToggle"))?t.el().insertBefore(t.addChild("SourceMenuButton").el(),l.el()):t.el().append(t.addChild("SourceMenuButton").el()))})}),n.registerComponent("SourceMenuButton",l),n.registerComponent("SourceMenuItem",a)}return e("httpSourceSelector",r),r.VERSION="1.1.7",r});
